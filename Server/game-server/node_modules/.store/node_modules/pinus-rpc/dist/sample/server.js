"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
require('source-map-support/register');
const preload_1 = require("./preload");
(0, preload_1.preload)();
const index_1 = require("../index");
const pinus_logger_1 = require("pinus-logger");
// configure('./config/log4js.json');
let logger = (0, pinus_logger_1.getLogger)('pinus-rpc', 'sample-server');
// remote service path info list
let paths = [
    {
        serverType: 'test',
        namespace: 'user', path: __dirname + '/remote/test'
    }
];
function runServer(port) {
    let server = (0, index_1.createServer)({ paths: paths, port: port, rpcDebugLog: true,
        rpcLogger: logger,
        acceptorFactory: index_1.createTcpAcceptor,
        bufferMsg: true,
        interval: 2000
    });
    server.start();
    console.log('rpc server started.' + port);
}
runServer(3333);
runServer(3334);
setTimeout(() => runServer(3335), 5000);
process.on('uncaughtException', function (err) {
    console.error(err);
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VydmVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc2FtcGxlL3NlcnZlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE9BQU8sQ0FBQyw2QkFBNkIsQ0FBQyxDQUFDO0FBQ3ZDLHVDQUFrQztBQUNsQyxJQUFBLGlCQUFPLEdBQUUsQ0FBQztBQUNWLG9DQUF5RDtBQUV6RCwrQ0FBdUM7QUFDdkMscUNBQXFDO0FBQ3JDLElBQUksTUFBTSxHQUFHLElBQUEsd0JBQVMsRUFBQyxXQUFXLEVBQUUsZUFBZSxDQUFDLENBQUM7QUFFckQsZ0NBQWdDO0FBQ2hDLElBQUksS0FBSyxHQUFHO0lBQ1Y7UUFDRSxVQUFVLEVBQUUsTUFBTTtRQUNsQixTQUFTLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxTQUFTLEdBQUcsY0FBYztLQUFDO0NBQ3ZELENBQUM7QUFJRixTQUFTLFNBQVMsQ0FBQyxJQUFZO0lBRTNCLElBQUksTUFBTSxHQUFHLElBQUEsb0JBQVksRUFBQyxFQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxXQUFXLEVBQUUsSUFBSTtRQUNsRSxTQUFTLEVBQUUsTUFBTTtRQUNqQixlQUFlLEVBQUUseUJBQWlCO1FBQ2xDLFNBQVMsRUFBRSxJQUFJO1FBQ2YsUUFBUSxFQUFFLElBQUk7S0FDakIsQ0FBQyxDQUFDO0lBQ0gsTUFBTSxDQUFDLEtBQUssRUFBRSxDQUFDO0lBQ2YsT0FBTyxDQUFDLEdBQUcsQ0FBQyxxQkFBcUIsR0FBRyxJQUFJLENBQUMsQ0FBQztBQUM5QyxDQUFDO0FBSUQsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ2hCLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUNoQixVQUFVLENBQUMsR0FBRyxFQUFFLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO0FBR3hDLE9BQU8sQ0FBQyxFQUFFLENBQUMsbUJBQW1CLEVBQUUsVUFBUyxHQUFHO0lBQ3hDLE9BQU8sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDdkIsQ0FBQyxDQUFDLENBQUMifQ==